---
title: "网络检查清单"
description: "RustFS 企业级部署网络检查清单"
---

# 网络检查清单



## 1. 网络架构设计

### 基础网络规划
- **拓扑结构验证** 
 确认部署架构（星型/环形/网状）是否满足分布式存储的高可用需求
- **冗余路径检查** 
 确保节点间存在至少两条独立物理链路
- **带宽规划** 
 计算预估流量：对象存储读写带宽 × 节点数量 × 副本数 + 20%冗余

### IP 规划
- [ ] 管理网络与数据网络分离
- [ ] 为存储节点分配连续 IP 段（建议/24 子网）
- [ ] 预留至少 15%的 IP 地址用于扩展

---

## 2. 硬件设备要求
### 交换机配置
| 检查项 | 标准要求 | 
|--------|---------|
| 背板带宽 | ≥ 全端口线速转发能力 × 1.2 | 
| 端口类型 | 10G/25G/100G SFP+/QSFP+ 光纤端口 | 
| 流表容量 | ≥ 节点数 × 5 | 
| 生成树协议 | 启用 RSTP/MSTP 快速收敛 |

### 物理连接
- [ ] 光纤衰减测试（单模≤0.35dB/km）
- [ ] 端口错位连接检查（A 节点 eth0 ↔ B 节点 eth0）
- [ ] 线缆标签系统（包含源/目的 IP+端口号）

---

## 3. 操作系统网络配置
### 内核参数调优
```bash
# 检查以下参数设置
net.core.rmem_max = 16777216
net.core.wmem_max = 16777216
net.ipv4.tcp_keepalive_time = 600
net.ipv4.tcp_slow_start_after_idle = 0
```

### 网卡配置
- [ ] 启用巨帧（MTU=9000，需全线路径支持）
- [ ] 验证网卡绑定模式（推荐 LACP mode4）
- [ ] 关闭 IPv6（如不需使用）

---

## 4. 安全策略
### 防火墙规则
```bash
# 必要开放端口
- TCP 443（HTTPS API）
- TCP 9000（S3 兼容接口） 
- TCP 7946（Serf 节点通信）
- UDP 4789（VxLAN 隧道）
```

### 访问控制
- 交换机端口安全 MAC 限制
- 存储节点间 IPSec 隧道加密
- 管理接口启用 TLS 1.3

---

## 5. 性能验证测试
### 基准测试项
1. 节点间延迟测试：`iperf3 -s 8972 <目标 IP>`
2. 跨机架带宽测试：`iperf3 -c <目标 IP> -P 8 -t 30`
3. 故障切换测试：随机断开核心链路观察恢复时间

### 验收标准
| 指标 | 要求 |
|------|------|
| 节点延迟 | ≤1ms（同机房）/≤5ms（跨 AZ） |
| 带宽利用率 | 峰值≤70% 设计容量 |
| 故障切换 | 小于 500ms BPDU 收敛 |

---

## 6. 文档记录要求
1. 网络拓扑图（含物理连接与逻辑 IP）
2. 交换机配置备份文件（含时间戳）
3. 基线测试报告（含原始数据）
4. 变更记录表（含维护窗口信息）

> **提示**：建议在正式部署前进行 72 小时压力测试，模拟峰值流量 110%的负载场景

此清单覆盖了企业级存储系统网络部署的关键检查点，特别针对分布式对象存储的特点优化了参数要求，您可以联系 RustFS 获得官方技术支持。